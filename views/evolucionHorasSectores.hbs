{{! Vista: Evolución de horas por sector (últimos 12 meses) }}
<div class="container my-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="mb-0">Evolución de horas por sector (últimos 12 meses)</h3>
    <a class="btn btn-outline-secondary btn-sm" href="/">Volver</a>
  </div>

  {{#if hayDatos}}
  <div class="table-responsive">
    <table class="table table-striped table-hover align-middle table-sm small tabla-evolucion-sectores">
      <thead class="table-light">
        <tr>
          <th>Sector</th>
          {{#each labels}}
            <th class="text-center">{{this}}</th>
          {{/each}}
          <th class="text-center">Evolución</th>
        </tr>
      </thead>
      <tbody>
        {{#each sectores}}
          <tr>
            <td>{{this.sector}}</td>
            {{#each this.minutos}}
              <td class="text-center">{{minutosAHoras this}}</td>
            {{/each}}
            <td class="text-center celda-sparkline">
              <canvas class="sparkline" data-puntos='{{json this.minutos}}' data-color="#0d6efd" data-background="rgba(13,110,253,0.10)" height="24"></canvas>
            </td>
          </tr>
        {{/each}}
        {{#if totalFila}}
          <tr class="table-secondary fw-bold">
            <td>Totales</td>
            {{#each totalFila.minutos}}
              <td class="text-center">{{minutosAHoras this}}</td>
            {{/each}}
            <td class="text-center celda-sparkline">
              <canvas class="sparkline" data-puntos='{{json totalFila.minutos}}' data-color="#0d6efd" data-background="rgba(13,110,253,0.10)" height="24"></canvas>
            </td>
          </tr>
        {{/if}}
      </tbody>
    </table>
  </div>
  {{else}}
  <div class="alert alert-warning">No hay datos históricos para mostrar.</div>
  {{/if}}
</div>

<script src="/js/sparklines-sectores.js"></script>
